<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Triangle</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRTrippin Games</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .board {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        .row {
            display: flex;
            justify-content: center;
        }
        .peg {
            width: 50px;
            height: 50px;
            background-color: blue;
            border-radius: 50%;
            cursor: pointer;
            margin: 5px;
        }
        .empty {
            background-color: lightgray;
        }
        .highlight {
            background-color: red !important;
        }
        .button-container {
            margin-top: 20px;
        }
        .reset-button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>QRTrippin Peg Game</h1>
    <p>Jump pegs over each other into an empty space, removing the jumped peg.</p>
    <div class="board" id="board"></div>
    <p id="status"></p>
    <p id="instruction"></p>
    <div class="button-container">
        <button class="reset-button" onclick="createBoard()">New Game</button>
    </div>
    <script>
        const board = document.getElementById("board");
        const size = 5;
        let pegs = [];
        let selectedPeg = null;
        let highlightedMoves = [];

        function createBoard() {
            board.innerHTML = "";
            document.getElementById("status").textContent = "";
            document.getElementById("instruction").textContent = "";
            pegs = Array.from({ length: size }, (_, row) => Array(row + 1).fill(true));
            let randomRow = Math.floor(Math.random() * size);
            let randomCol = Math.floor(Math.random() * (randomRow + 1));
            pegs[randomRow][randomCol] = false; // Random initial empty hole
            renderBoard();
        }

        function renderBoard() {
            board.innerHTML = "";
            pegs.forEach((rowArray, rowIndex) => {
                const rowDiv = document.createElement("div");
                rowDiv.classList.add("row");
                rowArray.forEach((peg, colIndex) => {
                    const pegDiv = document.createElement("div");
                    pegDiv.classList.add("peg");
                    if (!peg) pegDiv.classList.add("empty");
                    pegDiv.dataset.row = rowIndex;
                    pegDiv.dataset.col = colIndex;
                    pegDiv.onclick = () => selectPeg(rowIndex, colIndex);
                    rowDiv.appendChild(pegDiv);
                });
                board.appendChild(rowDiv);
            });
        }

        function selectPeg(row, col) {
            if (selectedPeg) {
                let [prevRow, prevCol] = selectedPeg;
                if (highlightedMoves.length === 1) {
                    makeMove(prevRow, prevCol, highlightedMoves[0][0], highlightedMoves[0][1]);
                } else if (highlightedMoves.some(([r, c]) => r === row && c === col)) {
                    makeMove(prevRow, prevCol, row, col);
                }
                clearHighlights();
                selectedPeg = null;
                document.getElementById("instruction").textContent = "";
            } else if (pegs[row][col]) {
                let legalMoves = getLegalMoves(row, col);
                if (legalMoves.length === 1) {
                    makeMove(row, col, legalMoves[0][0], legalMoves[0][1]);
                } else if (legalMoves.length > 1) {
                    selectedPeg = [row, col];
                    highlightMoves(legalMoves);
                    document.getElementById("instruction").textContent = "This peg has multiple legal moves. Select one of the highlighted red holes to move.";
                }
            }
        }

        function getLegalMoves(row, col) {
            const directions = [
                [-2, 0], [2, 0], // Vertical moves
                [0, -2], [0, 2], // Horizontal moves
                [-2, -2], [2, 2], // Diagonal moves left
                [-2, 2], [2, -2]  // Diagonal moves right
            ];
            let moves = [];
            for (let [dr, dc] of directions) {
                let midRow = row + dr / 2;
                let midCol = col + dc / 2;
                let targetRow = row + dr;
                let targetCol = col + dc;
                if (
                    pegs[targetRow] && pegs[targetRow][targetCol] === false &&
                    pegs[midRow] && pegs[midRow][midCol] === true
                ) {
                    moves.push([targetRow, targetCol]);
                }
            }
            return moves;
        }

        function highlightMoves(moves) {
            clearHighlights();
            highlightedMoves = moves;
            moves.forEach(([r, c]) => {
                document.querySelector(`[data-row='${r}'][data-col='${c}']`).classList.add("highlight");
            });
        }

        function clearHighlights() {
            highlightedMoves.forEach(([r, c]) => {
                document.querySelector(`[data-row='${r}'][data-col='${c}']`).classList.remove("highlight");
            });
            highlightedMoves = [];
        }

        function makeMove(fromRow, fromCol, toRow, toCol) {
            let midRow = (fromRow + toRow) / 2;
            let midCol = (fromCol + toCol) / 2;
            pegs[fromRow][fromCol] = false;
            pegs[midRow][midCol] = false;
            pegs[toRow][toCol] = true;
            renderBoard();
            checkGameOver();
        }

        function checkGameOver() {
            let remainingPegs = pegs.flat().filter(p => p).length;
            if (remainingPegs === 1) {
                document.getElementById("status").textContent = "You're a genius!";
            } else if (!hasLegalMoves()) {
                document.getElementById("status").textContent = "Game over! No more moves.";
            }
        }

        function hasLegalMoves() {
            return pegs.some((row, rowIndex) => row.some((peg, colIndex) => peg && getLegalMoves(rowIndex, colIndex).length > 0));
        }

        createBoard();
    </script>
</body>
</html>
<!-- partial -->
  
</body>
</html>
